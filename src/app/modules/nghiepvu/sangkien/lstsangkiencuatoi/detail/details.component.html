<div
    *ngIf="actionType === 'THEMMOI' || actionType === 'CHINHSUA' || actionType === 'THONGTINSK' || actionType === 'NANGCAPSK'"
    class="flex flex-col overflow-y-auto flex-auto bg-card dark:bg-default content-detail p-3"
    [formGroup]="form"
    novalidate
>
    <!-- <div class="">
        <h1 class="title-component" *ngIf="actionType === 'THEMMOI' || actionType === 'CHINHSUA'">ĐĂNG KÝ SÁNG KIẾN</h1>
        <h1 class="title-component" *ngIf="actionType === 'THONGTINSK'">THÔNG TIN SÁNG KIẾN</h1>
        <h1 class="title-component" *ngIf="actionType === 'NANGCAPSK'">NÂNG CẤP SÁNG KIẾN</h1>
    </div> -->
    <div class="flex flex-0 items-center justify-between h-16 px-4 border-b bg-gray-50 dark:bg-transparent">
        <div class="flex items-center w-full">

            <div class="ml-2 font-semibold uppercase whitespace-nowrap truncate">ĐĂNG KÝ SÁNG KIẾN</div>

            <span style="flex: 1 1 auto;"></span>
            <!-- <button mat-icon-button (click)="addNewNguoiThucHien()">
                <mat-icon [svgIcon]="'mat_outline:add'"></mat-icon>
            </button> -->
        </div>

    </div>
    <div class="flex flex-col flex-auto p-1 sm:p-1">
    <div class="py-5 px-2">
        <div class="grid grid-cols-4 grid-flow-row gap-2 w-full">
                <div class="flex flex-col flex-auto">
                    <mat-form-field>
                        <mat-label>Cấp độ sáng kiến</mat-label>
                        <mat-select mat-option [formControlName]="'capDoSangKien'">
                            <mat-option *ngFor="let x of listCapDo;" [value]="x.ID">{{x.NAME}}</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div class="flex flex-col flex-auto">
                    <mat-form-field>
                        <mat-label>Năm</mat-label>
                        <mat-select mat-option [formControlName]="'nam'">
                            <mat-option *ngFor="let x of listYears;" [value]="x.ID">{{x.NAME}}</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div class="flex flex-col flex-auto">
                    <mat-form-field>
                        <mat-label>Đơn vị chủ đầu tư</mat-label>
                        <mat-select mat-option [formControlName]="'donViChuDauTu'">
                            <mat-option *ngFor="let x of listDonViChuDauTu;" [value]="x.ID">{{x.NAME}}</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div class="flex flex-col flex-auto">
                    <mat-form-field>
                        <mat-label>Đơn vị đăng ký/áp dụng</mat-label>
                       
                        <input matInput [formControlName]="'donViApDung'">
                        <mat-icon svgIcon="mat_outline:search" (click)="openAlertDialog('DKAPDUNGSK', form)"></mat-icon>
                    </mat-form-field>
                </div>
        </div>
        <div class="grid grid-cols-1 grid-flow-row gap-2 w-full">
            <div class="flex flex-col flex-auto">
                <mat-form-field>
                    <mat-label>Tên giải pháp</mat-label>
                    <textarea matInput [formControlName]="'tenGiaiPhap'"  placeholder="Nhập tên giải pháp đề nghị công nhận sáng kiến..."></textarea>
                </mat-form-field>
            </div>
        </div>
        <div class="grid grid-cols-1 grid-flow-row gap-2 w-full">
            <div class="flex flex-col flex-auto">
                <label for="">Tác giả/Đồng tác giả của giải pháp</label>
            </div>
        </div>
        <div class="grid grid-cols-1 grid-flow-row gap-2 w-full">
                <table class="table">
                    <thead>
                    <tr>
                        <th class="text-center">STT</th>
                        <th>Họ và tên</th>
                        <th>Vai trò</th>
                        <th>Năm sinh</th>
                        <th>Nơi công tác</th>
                        <th>Trình độ chuyên môn</th>
                        <th>Nội dung tham gia</th>
                        <th>
                            <button class="pull-right add_button" (click)="addTacGia()">
                                +Thêm thành viên
                            </button>
                        </th>
                    </tr>
                    </thead>
                    <tbody formArrayName="tacGiaGiaiPhap">
                    <ng-container
                        *ngFor="
                                let tacgia of $any(form.get('tacGiaGiaiPhap')).controls;
                                let i = index
                            "
                    >
                        <tr [formGroup]="tacgia">
                            <td  class="text-center">{{ i + 1 }}</td>
                            <td>
                                <div class="flex flex-col flex-auto">
                                <mat-form-field>
                                    <mat-label></mat-label>
                                    <input matInput [formControlName]="'ten'">
                                    <mat-icon svgIcon="mat_outline:search" (click)="openAlertDialog('THANHVIEN', tacgia)"></mat-icon>
                                </mat-form-field>
                            </div>
                                <!-- <div class="select-cbkh flex items-center form-control">
                                   
                                    <input
                                        class="inputselect"
                                        type="text"
                                        name=""
                                        id=""
                                        maxlength="200"
                                        formControlName="ten"
                                    />
                                    <i
                                        (click)="openAlertDialog('THANHVIEN', tacgia)"
                                        class="fa fa-search"
                                    ></i>
                                </div> -->
                                <!-- <input style="border:1px solid #ccc; border-radius: 5px;" type="text" name="" formControlName="ten" id=""> <i (click)="openAlertDialog('THANHVIEN',thanhvien.get('ten'))" class="fa fa-search"></i> -->
                            </td>
                            <td style="width: 130px;">
                                <div class="flex flex-col flex-auto">
                                    <mat-form-field>
                                        <mat-label></mat-label>
                                        <mat-select mat-option [formControlName]="'chucDanh'"   placeholder="Chọn chức danh">
                                            <mat-option *ngFor="let x of listChucDanh;" [value]="x.ID">{{x.NAME}}</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                               
                            </td>
                            <!-- {{thanhvien.get('chucDanh').value}} -->
                            <td style="width: 110px;">
                                <div class="flex flex-col flex-auto">
                                    <mat-form-field>
                                        <mat-label></mat-label>
                                        <input matInput [formControlName]="'namSinh'" (change)="checkYear($event)">
                                    </mat-form-field>
                                </div>
                            </td>
                            <td>
                                <div class="flex flex-col flex-auto">
                                    <mat-form-field>
                                        <mat-label></mat-label>
                                        <input matInput [formControlName]="'diaChiNoiLamViec'">
                                    </mat-form-field>
                                </div>
                              
                            </td>
                            <td>
                                <div class="flex flex-col flex-auto">
                                    <mat-form-field>
                                        <mat-label></mat-label>
                                        <input matInput [formControlName]="'thanhTuu'">
                                    </mat-form-field>
                                </div>
                               
                            </td>
                            <td>
                                <div class="flex flex-col flex-auto">
                                    <mat-form-field>
                                        <mat-label></mat-label>
                                        <input matInput [formControlName]="'noiDungThamGia'">
                                    </mat-form-field>
                                </div>
                               
                            </td>
                            <td class="text-center action-table">
                                <i
                                    (click)="removeItem(form, i)"
                                    class="fa fa-trash"
                                    title="Xóa bỏ"
                                ></i>
                            </td>
                        </tr>
                    </ng-container>
                    </tbody>
                </table>
        </div>
        <div class="grid grid-cols-2 grid-flow-row gap-2 w-full mt-3">
            <div class="flex flex-col flex-auto">
                <mat-form-field>
                    <mat-label>Lĩnh vực áp dụng sáng kiến</mat-label>
                    <mat-select mat-option [formControlName]="'linhVucNghienCuu'" [compareWith]="objectComparisonLVUC_NCUU" multiple>
                        <mat-option *ngFor="let x of listLinhVucNghienCuu;"
                            [value]="x">{{x.NAME}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="flex flex-col flex-auto">
                <div class="basis-1/2 flex items-center justify-end">
                    <input type="checkbox" class="mr-1" formControlName="thuTruongDonVi"/>
                    <label for="">Tác giả là thủ trưởng đơn vị</label>
                </div>
                <!-- <input type="checkbox" class="mr-1" formControlName="thuTruongDonVi"/>
                <label for="">Tác giả là thủ trưởng đơn vị</label> -->
                <!-- <mat-checkbox class="m-[0.5rem]" [formControlName]="'NGOAI_EVN'">Tác giả là thủ trưởng đơn vị
                </mat-checkbox> -->
            </div>
        </div>
        <div class="grid grid-cols-1 grid-flow-row gap-2 w-full">
            <div class="flex flex-col flex-auto">
                <mat-form-field>
                    <mat-label>Ưu nhược điểm của giải pháp kỹ thuật</mat-label>
                    <textarea matInput [formControlName]="'uuNhuocDiem'"></textarea>
                </mat-form-field>
            </div>
        </div>
        <div class="grid grid-cols-1 grid-flow-row gap-2 w-full">
            <div class="flex flex-col flex-auto">
                <mat-form-field>
                    <mat-label>Nội dung giải pháp</mat-label>
                    <textarea matInput [formControlName]="'noiDungGiaiPhap'"></textarea>
                </mat-form-field>
            </div>
        </div>
        
            <div class="overflow-auto">   
    <div class="flex flex-row row gap-4 items-center mt-3">
        <label for="" class=""
        >Ngày áp dụng chính thức (Không được ít hơn 3 tháng và không quá 1
            năm)</label
        >
        <!-- <input type="date" class="form-control ml-9 w-60" formControlName="ngayApDung"/> -->
        <div class="form-date">
            <input
                matInput
                [matDatepicker]="pickers"
                formControlName="ngayApDung"
            />
            <mat-datepicker-toggle
                matIconSuffix
                [for]="pickers"
            ></mat-datepicker-toggle>
            <mat-datepicker
                #pickers
            ></mat-datepicker>
        </div>
    </div>
    <div class="flex flex-row row gap-4">
        <div class="basis-full">
            <label for=""
            >Quá trình áp dụng giải pháp trên thực tiễn hoặc áp dụng
                thử</label
            >
            <textarea
                name=""
                id=""
                class="form-control p-3 min-h-30"
                maxlength="2400"
                formControlName="quaTrinhApDung"
            ></textarea>
        </div>
    </div>
    <div class="flex flex-row row gap-4">
        <div class="basis-full">
            <label for=""
            >Hiệu quả thực tế thu được khi áp dụng giải pháp</label
            >
            <textarea
                name=""
                id=""
                class="form-control p-3 min-h-30"
                formControlName="hieuQuaThucTe"
                maxlength="2400"
            ></textarea>
        </div>
    </div>
    <div class="flex flex-row row gap-4">
        <div class="basis-full">
            <label for="">Tóm tắt: Bản chất của giải pháp/sáng kiến</label>
            <textarea
                name=""
                id=""
                class="form-control p-3 min-h-30"
                formControlName="tomTat"
            ></textarea>
        </div>
    </div>
    <label for=""
    >Danh sách những người tham gia tổ chức áp dụng sáng kiến lần
        đầu (nếu có)</label
    >
    <table class="table table_custom">
        <thead>
        <tr>
            <th class="stt_table">STT</th>
            <th>Họ và tên</th>
            <th>Năm sinh</th>
            <th>Nơi công tác</th>
            <th>Trình độ chuyên môn</th>
            <th>Nội dung tham gia</th>
            <th>
                <button class="pull-right add_button" (click)="addFirstTimeAdopter()">
                    +Thêm thành viên
                </button>
            </th>
        </tr>
        </thead>
        <tbody formArrayName="tacGiaGiaiPhap">
        <ng-container
            *ngFor="
                    let firstTimeAdopter of $any(form.get('firstTimeAdopters')).controls;
                    let i = index
                "
        >
            <tr [formGroup]="firstTimeAdopter">
                <td class="stt_table">{{ i + 1 }}</td>
                <td>
                    <div class="select-cbkh flex items-center form-control">
                        <input
                            class="inputselect"
                            type="text"
                            name=""
                            id=""
                            maxlength="200"
                            formControlName="ten"
                        />
                        <i
                            (click)="openAlertDialog('THANHVIEN', firstTimeAdopter)"
                            class="fa fa-search"
                        ></i>
                    </div>
                </td>
                <td style="width: 110px;">
                    <input
                        style="
                                border: 1px solid #ccc;
                                border-radius: 5px;
                                width: 100%;
                                height: 30px;
                            "
                        class="inputselect"
                        type="text"
                        name=""
                        id=""
                        formControlName="namSinh" (change)="checkYear($event)"
                    />
                </td>
                <td>
                    <input
                        style="
                                border: 1px solid #ccc;
                                border-radius: 5px;
                                width: 100%;
                                height: 30px;
                            "
                        class="inputselect"
                        type="text"
                        name=""
                        id=""
                        maxlength="200"
                        formControlName="diaChiNoiLamViec"
                    />
                </td>
                <td>
                    <input
                        style="
                                border: 1px solid #ccc;
                                border-radius: 5px;
                                width: 100%;
                                height: 30px;
                            "
                        class="inputselect"
                        type="text"
                        name=""
                        id=""
                        maxlength="200"
                        formControlName="thanhTuu"
                    />
                </td>
                <td>
                    <input
                        style="
                                border: 1px solid #ccc;
                                border-radius: 5px;
                                width: 100%;
                                height: 30px;
                            "
                        class="inputselect"
                        type="text"
                        name=""
                        id=""
                        maxlength="450"
                        formControlName="noiDungThamGia"
                    />
                </td>
                <td class="text-center action-table">
                    <i
                        (click)="removeFirstTimeAdopter(form, i)"
                        class="fa fa-trash"
                        title="Xóa bỏ"
                    ></i>
                </td>
            </tr>
        </ng-container>
        </tbody>
    </table>
    <div class="flex flex-row row gap-4 items-center">
        <label for=""
        >Số tiền làm lợi trong năm đầu tiên áp dụng giải pháp</label
        >
        <input
            type="text"
            class="form-control w-100 ml-4 mr-4 text-right"
            name=""
            money
            [options]="{
                numeral: true,
                numeralIntegerScale: 15
              }"
            id=""
            formControlName="soTienLamLoi"
        />
        <!-- <span>{{this.vndMoney}}</span> -->
        <label for="">(Lần tháng lương cơ sơ)</label>
    </div>
   
    <div class="flex flex-row row items-center" formArrayName="listFolderFile"
         *ngFor="let item of form.get('listFolderFile')['controls']; let i = index">
        <ng-conainer [formGroupName]="i">
            <div class="flex">
                <label for="" class="w-100">{{item.get('fileName').value}}<span
                    *ngIf="item.get('maFolder').value=='VBDANGKY'">(*)</span></label>
                <label class="custom-file-upload add_button-import">
                    <input type="file" multiple (change)="handleUpload($event,item,i)" #fileUpload2/>
                    <i class="fa fa-cloud-upload"></i> Upload file
                </label>
            </div>

            <div class="list-file" *ngIf="item.get('listFile').value.length > 0">
                <table class="table">
                    <tbody formArrayName="listFile" class="table_listfile" style="width:100% !important">
                    <ng-container *ngFor="let item2 of item.get('listFile')['controls'];let k = index">
                        <tr [formGroupName]="k">
                            <td>
                                <!-- <i
                                    class="fa fa-file-text-o border-none mr-0 p-0 text-sky-500"
                                ></i> -->
                                {{ item2.get("fileName").value }}
                                ({{
                                item2.get("size").value >
                                1024 * 1024
                                    ? (
                                    item2.get("size").value /
                                    (1024 * 1024)
                                ).toFixed(1) + " MB"
                                    : item2.get("size").value > 1024
                                    ? (
                                        item2.get("size").value /
                                        1024
                                    ).toFixed(1) + " KB"
                                    : item2
                                        .get("size")
                                        .value.toFixed(1) + "K"
                                }})
                                <i
                                    style="
                                color: red;
                                cursor: pointer;
                                margin-right: 3px;
                            "
                                    (click)="deleteItemFile(item, k)"
                                    class="fa fa-trash"
                                    title="Xóa bỏ"
                                ></i>
                                <!-- <i
                                    class="fa fa-cloud-download"
                                    style="
                                color: green;
                                cursor: pointer;
                            "
                                    aria-hidden="true"
                                    (click)="downLoadFile(item2)"
                                    title="Download file"
                                ></i> -->
                            </td>
                        </tr>
                    </ng-container>
                    </tbody>
                </table>
            </div>


        </ng-conainer>
    </div>

    <div class="action-all-f">
        <button class="add_button" (click)="onSubmit('LUU', 'SUA')">
            <i class="fa fa-save"></i> Lưu
        </button>
        <button class="add_button  ml-3" (click)="onSubmit('LUUGUI', 'SUA')">
            <i class="fa fa-save"></i> Lưu và gửi
        </button>
        <button class="add_button bg-sky-500  ml-3"  [class.khongthaotac]="actionType=='THEMMOI'" (click)="exportMau()">
            <i class="fa fa-cloud-download"></i> Xuất mẫu đơn
        </button>
    </div>
</div>
</div>
</div>
</div>
<!--chi tiết-->
<div
    *ngIf="actionType == 'CHITIET'"
    class="flex flex-col flex-auto overflow-y-auto bg-card dark:bg-default content-detail p-3"
    [formGroup]="form"
>
    <div class="">
        <h1 class="title-component">CHI TIẾT THÔNG TIN SÁNG KIẾN</h1>
    </div>

    <mat-tab-group class="detail_tab1">
        <mat-tab label="Thông tin sáng kiến        ">
            <table class="table table_custom" style="margin-top: 0">
                <tbody>
                <tr>
                    <td>Tên giải pháp</td>
                    <td style="font-weight: 600; color: #2a3493">
                        {{data?.tenGiaiPhap}}
                    </td>
                </tr>
                <tr>
                    <td>Cấp độ sáng kiến</td>
                    <td>{{data?.tenCapDo}}</td>
                </tr>
                <tr>
                    <td>Lĩnh vực áp dụng sáng kiến</td>
                    <td>{{data?.lstTenLinhVucNghienCuu}}</td>
                </tr>
                <tr>
                    <td>Đơn vị chủ đầu tư</td>
                    <td>{{data?.tenDonViChuDauTu}}</td>
                </tr>
                <tr>
                    <td>Ưu nhược điểm của giải pháp kỹ thuật</td>
                    <td>{{data?.uuNhuocDiem}}</td>
                </tr>
                <tr>
                    <td>Năm</td>
                    <td>{{data?.nam}}</td>
                </tr>
                <tr>
                    <td>Nội dung giải pháp</td>
                    <td>{{data?.noiDungGiaiPhap}}</td>
                </tr>
                <tr>
                    <td>Ngày áp dụng chính thức</td>
                    <td>{{data?.ngayApDung  | date:'dd/MM/yyyy'  }}</td>
                </tr>
                <tr>
                    <td>
                        Quá trình áp dụng giải pháp trên thực tiễn hoặc áp
                        dụng thử
                    </td>
                    <td>{{data?.quaTrinhApDung}}</td>
                </tr>
                <tr>
                    <td>Hiệu quả thực tế thu được khi áp dụng giải pháp</td>
                    <td>{{data?.hieuQuaThucTe}}</td>
                </tr>
                <tr>
                    <td>Tóm tắt: Bản chất của giải pháp/sáng kiến</td>
                    <td>{{data?.tomTat}}</td>
                </tr>
                <tr>
                    <td>
                        Danh sách những người tham gia tổ chức áp dụng sáng
                        kiến lần đầu (nếu có)
                    </td>
                    <td>
                        <table>
                            <thead>
                            <th>STT</th>
                            <th>Họ và tên</th>
                            <th>Năm sinh</th>
                            <th>Nơi công tác</th>
                            <th>Trình độ chuyên môn</th>
                            <th>Nội dung tham gia</th>
                            </thead>
                            <tbody>
                            <ng-container *ngFor="let item of data?.firstTimeAdopters; let i = index">
                                <tr>
                                    <td>{{i + 1}}</td>
                                    <td>{{item?.ten}}</td>
                                    <td>{{item?.namSinh}}</td>
                                    <td>{{item?.diaChiNoiLamViec}}</td>
                                    <td>{{item?.thanhTuu}}</td>
                                    <td>{{item?.noiDungThamGia}}</td>
                                    <td></td>
                                </tr>
                            </ng-container>
                            </tbody>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td>
                        Số tiền làm lợi trong năm đầu tiên áp dụng giải pháp
                    </td>
                    <td>{{data?.soTienLamLoi | number}}<span> (Lần tháng lương cơ sở)</span></td>
                </tr>
                <tr>
                    <td>Tác giả là thủ trưởng đơn vị</td>
                    <td>{{data?.thuTruongDonVi?"Có":"Không"}}</td>
                </tr>
                </tbody>
            </table>
            <div class="flex flex-row row items-center" formArrayName="listFolderFile"
            *ngFor="let item of form.get('listFolderFile')['controls']; let i = index">
           <ng-conainer [formGroupName]="i">
               <div class="flex">
                   <label for="" class="w-100">{{item.get('fileName').value}}<span
                       *ngIf="item.get('maFolder').value=='VBDANGKY'">(*)</span></label>
                   <!-- <label class="custom-file-upload add_button-import">
                       <input type="file" multiple (change)="handleUpload($event,item,i)" #fileUpload2/>
                       <i class="fa fa-cloud-upload"></i> Upload file
                   </label> -->
               </div>

               <div class="list-file" *ngIf="item.get('listFile').value.length > 0">
                   <table class="table">
                       <tbody formArrayName="listFile" class="table_listfile" style="width:100% !important">
                       <ng-container *ngFor="let item2 of item.get('listFile')['controls'];let k = index">
                           <tr [formGroupName]="k">
                               <td>
                                   {{ item2.get("fileName").value }}
                                   ({{
                                   item2.get("size").value >
                                   1024 * 1024
                                       ? (
                                       item2.get("size").value /
                                       (1024 * 1024)
                                   ).toFixed(1) + " MB"
                                       : item2.get("size").value > 1024
                                       ? (
                                           item2.get("size").value /
                                           1024
                                       ).toFixed(1) + " KB"
                                       : item2
                                           .get("size")
                                           .value.toFixed(1) + "K"
                                   }})
                                   <!-- <i
                                       style="
                                   color: red;
                                   cursor: pointer;
                                   margin-right: 3px;
                               "
                                       (click)="deleteItemFile(item, k)"
                                       class="fa fa-trash"
                                       title="Xóa bỏ"
                                   ></i> -->
                                    <i
                                       class="fa fa-cloud-download"
                                       style="
                                   color: green;
                                   cursor: pointer;
                               "
                                       aria-hidden="true"
                                       (click)="downLoadFile(item2)"
                                       title="Download file"
                                   ></i>
                               </td>
                           </tr>
                       </ng-container>
                       </tbody>
                   </table>
               </div>


           </ng-conainer>
       </div>
            <!-- <div class="flex items-center mt-3">
                <div style="width: 200px;"><label>Đơn đăng ký : </label></div>
                <br>
                <div
                    class="list-file"
                    *ngIf="listFileVB?.length > 0"
                >
                    <table class="table table_custom action-table"
                           style="width: auto; padding: 10px; text-align: center">
                        <tbody

                            class="table_listfile"
                        >
                        <tr
                            *ngFor="let item2 of listFileVB;let k = index"
                        >
                            <td style="width: auto;">
                                <i
                                    class="fa fa-file-text-o border-none mr-0 p-0 text-sky-500"
                                ></i>
                                {{item2?.fileName}}
                            </td>
                            <td style="width: 70px;  text-align: center">
                                {{
                                item2.size > 1024 * 1024 ?
                                    (item2.size / (1024 * 1024)).toFixed(1) + "(MB)"
                                    : item2.size > 1024
                                    ? (item2.size / 1024).toFixed(1) +
                                    "(KB)"
                                    : item2.size.toFixed(1) + "K"
                                }}
                            </td>

                            <td>
                                {{item2?.sovanban}}
                            </td>
                            <td class="text-right">
                                <i
                                    class="fa fa-cloud-download"
                                    style=" color: green;cursor: pointer; font-size: 20px;"
                                    aria-hidden="true"
                                    (click)="downLoadFile(item2)"
                                    title="Download file"
                                ></i>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div> -->
            <!-- <div class="flex items-center mt-3">
                <div style="width: 200px;"><label>Hồ sơ tài liệu đính kèm: </label></div>
                <br>
                <div
                    class="list-file"
                    *ngIf="listFileOther?.length > 0"
                >
                    <table class="table table_custom action-table" style="width: auto; padding: 10px;">

                        <tbody

                            class="table_listfile"
                        >
                        <tr
                            *ngFor="let item3 of listFileOther;let l = index"
                        >
                            <td style="width: auto;">
                                <i
                                    class="fa fa-file-text-o border-none mr-0 p-0 text-sky-500"
                                ></i>
                                {{item3.fileName}}
                            </td>
                            <td style="width: 70px;  text-align: center">
                                {{
                                item3.size > 1024 * 1024 ?
                                    (item3.size / (1024 * 1024)).toFixed(1) + "(MB)"
                                    : item3.size > 1024
                                    ? (item3.size / 1024).toFixed(1) +
                                    "(KB)"
                                    : item3.size.toFixed(1) + "K"
                                }}
                            </td>

                            <td>
                                {{item3.sovanban}}
                            </td>
                            <td class="text-right">
                                <i
                                    class="fa fa-cloud-download"
                                    style=" color: green;cursor: pointer; font-size: 20px;"
                                    aria-hidden="true"
                                    (click)="downLoadFile(item3)"
                                    title="Download file"
                                ></i>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div> -->
        </mat-tab>
        <mat-tab label="Thông tin tác giả">
            <table class="table table_custom" style="margin-top: 0">
                <thead>
                <tr>
                    <th class="stt_table">STT</th>
                    <th>Họ và tên</th>
                    <th>Vai trò</th>
                    <th>Nơi công tác</th>
                    <th>Trình độ chuyên môn</th>
                    <th>Nội dung tham gia</th>
                </tr>
                </thead>
                <tbody style="text-align: center;">
                <tr *ngFor="let item4 of listAuthor;let l = index">
                    <td class="stt_table">{{l + 1}}</td>
                    <td class="text-left">{{item4.ten}}</td>
                    <td class="text-left">{{item4.tenChucDanh}}</td>
                    <td class="text-left">{{item4.diaChiNoiLamViec}}</td>
                    <td class="text-left">{{item4.thanhTuu}}</td>
                    <td class="text-left">{{item4.noiDungThamGia}}</td>
                </tr>
                </tbody>
            </table>
        </mat-tab>
        <mat-tab label="Phê duyệt/công nhận">
            <div class="flex flex-row row gap-4">
                <div class="w-20">
                    <label class="tiite_lale" for="">Trạng thái</label>
                </div>
                <div class="w-40">
                    <span>{{data?.tenTrangThai}}</span>
                </div>
                <div class="w-40">
                    <label class="tiite_lale" for="">Ngày xét duyệt</label>
                </div>
                <div class="w-40">
                    <span>{{data?.ngayApDung | date :'dd/MM/yyyy'}}</span>
                </div>
            </div>

            <label class="tiite_lale flex">Luận giải của hội đồng khoa học về kết quả đánh giá: </label>
            <span>{{data?.luanGiaiHoiDong}}</span>
            <label class="tiite_lale flex">Kiến nghị của Hội đồng: </label>
            <span>{{data?.kienNghiHoiDongXetDuyet}}</span>
            <label class="tiite_lale flex">Thù lao cho sáng kiến: </label>
            <span>{{data?.thoaThuanChiPhi | number}}</span>
            <label
                class="tiite_lale"
                style="margin-top: 20px; display: block"
                for=""
            >Thành viên hội đồng</label
            >
            <table class="table table_custom" style="margin-top: 0">
                <thead>
                <tr>
                    <th class="stt_table">STT</th>
                    <th>Thành viên hội đồng</th>
                    <th>Vai trò</th>
                    <th>Ghi chú</th>
                </tr>
                </thead>
                 <tbody style="text-align: center">
                    <ng-container *ngFor="
                    let item of hoidongs;
                    let i = index
                ">
                <tr [formGroupName]="i">
                    <td class="stt_table">{{ i + 1 }}</td>
                    <td>
                        {{ item.ten }}
                    </td>
                    <td>
                        {{ item.tenChucDanh }}
                    </td>
                    <td> {{ item.ghiChu }}</td>

                </tr>
                </ng-container>
                </tbody>
            </table>

            <label class="tiite_lale" for=""
            >Danh sách các văn bản liên quan</label
            >
            <table class="table table_custom" style="margin-top: 0">
                <thead>
                <tr>
                    <th class="stt_table">STT</th>
                    <th>Tên văn bản</th>
                    <th>Số ký hiệu</th>
                    <th>Ngày văn bản</th>
                    <th>File nội dung</th>
                </tr>
                </thead>
                <tbody formArrayName="listFolderFileHDXD">
                    <ng-container *ngFor="
                    let item of form.get('listFolderFileHDXD')['controls'];
                    let i = index
                ">
                <tr

                    [formGroupName]="i"
                >
                    <td class="stt_table">{{ i + 1 }}</td>
                    <td class="font-medium">
                        {{ item.get("fileName").value }}
                    </td>
                    <td class="font-medium">
                        {{ item.get("sovanban").value }}
                    </td>
                    <td class="font-medium">
                        {{ item.get("ngayVanBan").value | date:'dd/MM/yyyy'}}
                    </td>
                    <!-- <td><input type="text"  class="form-control" formControlName="sovanban" /></td>
                    <td>  <div class="form-date">
                        <input
                            matInput
                            type="text"
                            [matDatepicker]="picker"
                            formControlName="ngayVanBan"
                            placeholder="dd/mm/yyyy"
                        />
                        <mat-datepicker-toggle
                            matIconSuffix
                            [for]="picker"
                        ></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                    </div></td>  -->
                    <td>
                        <div class="list-file" *ngIf="item.get('listFile').value.length > 0">
                            <table class="table">
                                <tbody formArrayName="listFile" class="table_listfile" style="width:100% !important">
                                <ng-container *ngFor="let item2 of item.get('listFile')['controls'];let k = index">
                                    <tr [formGroupName]="k">
                                        <td>
                                            {{ item2.get("fileName").value }}
                                            ({{
                                            item2.get("size").value >
                                            1024 * 1024
                                                ? (
                                                item2.get("size").value /
                                                (1024 * 1024)
                                            ).toFixed(1) + " MB"
                                                : item2.get("size").value > 1024
                                                ? (
                                                    item2.get("size").value /
                                                    1024
                                                ).toFixed(1) + " KB"
                                                : item2
                                                    .get("size")
                                                    .value.toFixed(1) + "K"
                                            }})
                                            <!-- <i
                                                style="
                                            color: red;
                                            cursor: pointer;
                                            margin-right: 3px;
                                        "
                                                (click)="deleteItemFile(item, k)"
                                                class="fa fa-trash"
                                                title="Xóa bỏ"
                                            ></i> -->
                                             <i
                                                class="fa fa-cloud-download"
                                                style="
                                            color: green;
                                            cursor: pointer;
                                        "
                                                aria-hidden="true"
                                                (click)="downLoadFile(item2)"
                                                title="Download file"
                                            ></i>
                                        </td>
                                    </tr>
                                </ng-container>
                                </tbody>
                            </table>
                        </div>
                        <!-- <div
                            class="list-file"
                            *ngIf="item.get('listFile').value.length > 0"
                        >
                            <table class="table table_custom action-table">
                                <tbody
                                    formArrayName="listFile"
                                    class="table_listfile"
                                >
                                <tr
                                    *ngFor="
                                                let item2 of item.get(
                                                    'listFile'
                                                )['controls'];
                                                let k = index
                                            "
                                >
                                    <td>
                                        {{
                                        item2.get("fileName").value
                                        }}

                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div> -->
                    </td>
                </tr>
            </ng-container>
                </tbody>
            </table>

            <div class="flex flex-row row items-center" formArrayName="listFolderFileThuLao"
            *ngFor="let item of form.get('listFolderFileThuLao')['controls']; let i = index">
           <ng-conainer [formGroupName]="i">
               <div class="flex">
                   <label for="" class="w-100">{{item.get('fileName').value}}<span
                       *ngIf="item.get('maFolder').value=='VBDANGKY'">(*)</span></label>
                   <!-- <label class="custom-file-upload add_button-import">
                       <input type="file" multiple (change)="handleUpload($event,item,i)" #fileUpload2/>
                       <i class="fa fa-cloud-upload"></i> Upload file
                   </label> -->
               </div>

               <div class="list-file" *ngIf="item.get('listFile').value.length > 0">
                   <table class="table">
                       <tbody formArrayName="listFile" class="table_listfile" style="width:100% !important">
                       <ng-container *ngFor="let item2 of item.get('listFile')['controls'];let k = index">
                           <tr [formGroupName]="k">
                               <td>
                                   {{ item2.get("fileName").value }}
                                   ({{
                                   item2.get("size").value >
                                   1024 * 1024
                                       ? (
                                       item2.get("size").value /
                                       (1024 * 1024)
                                   ).toFixed(1) + " MB"
                                       : item2.get("size").value > 1024
                                       ? (
                                           item2.get("size").value /
                                           1024
                                       ).toFixed(1) + " KB"
                                       : item2
                                           .get("size")
                                           .value.toFixed(1) + "K"
                                   }})
                                   <!-- <i
                                       style="
                                   color: red;
                                   cursor: pointer;
                                   margin-right: 3px;
                               "
                                       (click)="deleteItemFile(item, k)"
                                       class="fa fa-trash"
                                       title="Xóa bỏ"
                                   ></i> -->
                                    <i
                                       class="fa fa-cloud-download"
                                       style="
                                   color: green;
                                   cursor: pointer;
                               "
                                       aria-hidden="true"
                                       (click)="downLoadFile(item2)"
                                       title="Download file"
                                   ></i>
                               </td>
                           </tr>
                       </ng-container>
                       </tbody>
                   </table>
               </div>


           </ng-conainer>
           </div>

            <!-- <div class="flex flex-row row gap-4">
                <div class="basis-1/6">
                    <label for=""
                    >Phiếu đánh giá của các thành viên hội đồng</label
                    >
                </div>
                <div class="basis-1/5">
                    <button
                        class="bg-sky-500 color text-white px-8 py-2 rounded-md"
                    >
                        <i class="fa fa-cloud-download"></i> Tải về
                    </button>
                </div>
            </div>
            <div class="flex flex-row row gap-4">
                <div class="basis-1/6">
                    <label for="">Biên bản họp hội đồng sáng kiến</label>
                </div>
                <div class="basis-1/5">
                    <button
                        class="bg-sky-500 color text-white px-8 py-2 rounded-md"
                    >
                        <i class="fa fa-cloud-download"></i> Tải về
                    </button>
                </div>
            </div>
            <div class="flex flex-row row gap-4">
                <div class="basis-1/6">
                    <label for="">Quyết định công nhận sáng kiến</label>
                </div>
                <div class="basis-1/5">
                    <button
                        class="bg-sky-500 color text-white px-8 py-2 rounded-md"
                    >
                        <i class="fa fa-cloud-download"></i> Tải về
                    </button>
                </div>
            </div>
            <div class="flex flex-row row gap-4">
                <div class="basis-1/6">
                    <label for="">Giấy chứng nhận sáng kiến</label>
                </div>
                <div class="basis-1/5">
                    <button
                        class="bg-sky-500 color text-white px-8 py-2 rounded-md"
                    >
                        <i class="fa fa-cloud-download"></i> Tải về
                    </button>
                </div>
            </div>
            <div class="flex flex-row row gap-4">
                <div class="basis-1/6">
                    <label for="">Quyết định chi trả thù lao</label>
                </div>
                <div class="basis-1/5">
                    <button
                        class="bg-sky-500 color text-white px-8 py-2 rounded-md"
                    >
                        <i class="fa fa-cloud-download"></i> Tải về
                    </button>
                </div>
            </div> -->
        </mat-tab>
    </mat-tab-group>
</div>

<!--LICH SU-->
<div
    *ngIf="actionType == 'LICHSU'"
    class="flex flex-col flex-auto overflow-y-auto bg-card dark:bg-default content-detail p-3"
    [formGroup]="form"
>
    <app-lichsu
        title_lichsu=""
        [typeLichSu]="typeLichSu"
        [madeTaiSK]="madeTaiSK"
    ></app-lichsu>
</div>
